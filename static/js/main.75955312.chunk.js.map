{"version":3,"sources":["actions.js","gateways.js","components/Form.jsx","App.jsx","reducer.js","store.js","index.js"],"names":["getUsersList","dispatch","fetch","then","response","json","catch","err","alert","usersList","type","payload","usersListReceived","Form","onCreateUser","onChangeUser","headerText","cancelForm","clickedElement","useState","name","onChangeName","surname","onChangeSurname","className","placeholder","value","onChange","e","target","onClick","preventDefault","mapDispatch","newUser","desc","userData","method","headers","body","JSON","stringify","onDeleteUser","userId","deleteUser","updatedUser","getState","user","find","id","updateUserData","console","log","updateUser","connect","state","opened","formIsOpened","onChangeFormIsOpened","changeClickedElement","currentPage","changeCurrentPage","useEffect","openForm","isOpened","text","Object","keys","length","slice","map","elem","key","disabled","initialState","usersReducer","action","reducers","combineReducers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.75955312.chunk.js","sourcesContent":["import { fetchUsersList, createUser, updateUser, deleteUser } from './gateways';\r\n\r\nexport const usersListReceived = usersList => ({\r\n    type: 'GET_USERS_LIST',\r\n    payload: {\r\n        usersList,\r\n    }\r\n})\r\n\r\nexport const getUsersList = () => {\r\n    const thunkAction = function (dispatch) {\r\n        fetchUsersList()\r\n            .then(usersList => {\r\n                dispatch(usersListReceived(usersList))\r\n            })\r\n    };\r\n    return thunkAction;\r\n}\r\n\r\nexport const onCreateUser = (name, surname) => {\r\n    const newUser = {\r\n        name: name,\r\n        surname: surname,\r\n        desc: 'desc',\r\n    }\r\n    const thunkAction = function (dispatch) {\r\n        createUser(newUser)\r\n            .then(() => dispatch(getUsersList()))\r\n    }\r\n    return thunkAction;\r\n}\r\n\r\nexport const onChangeUser = (userId, name, surname) => {\r\n    let updatedUser = {}\r\n    const thunkAction = function (dispatch, getState) {\r\n        const usersList = getState()\r\n        const user = usersList.usersList.usersList.usersList.find(\r\n            user => user.id === userId,\r\n        )\r\n\r\n        if (!name) {\r\n            updatedUser = {\r\n                ...user,\r\n                surname: surname,\r\n            }\r\n        }\r\n\r\n        if (!surname) {\r\n            updatedUser = {\r\n                ...user,\r\n                name: name,\r\n            }\r\n        }\r\n\r\n        if (!name && !surname) {\r\n            updatedUser = {\r\n                ...user,\r\n            }\r\n        }\r\n\r\n        if (name && surname) {\r\n            updatedUser = {\r\n                ...user,\r\n                name: name,\r\n                surname: surname,\r\n            }\r\n        }\r\n\r\n        updateUser(userId, updatedUser)\r\n            .then(() => dispatch(getUsersList()))\r\n    };\r\n    return thunkAction;\r\n}\r\n\r\nexport const onDeleteUser = (userId) => {\r\n    const thunkAction = function (dispatch) {\r\n        deleteUser(userId)\r\n            .then(usersList => dispatch(getUsersList(usersList)))\r\n    };\r\n    return thunkAction;\r\n}","export const fetchUsersList = () => {\r\n    return fetch(`http://77.120.241.80:8911/api/users`)\r\n        .then(response => response.json())\r\n        .catch(err => alert(err))\r\n}\r\n\r\nexport const createUser = userData => {\r\n    return fetch('http://77.120.241.80:8911/api/users', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json; charset=utf-8'\r\n        },\r\n        body: JSON.stringify(userData),\r\n    })\r\n}\r\n\r\nexport const updateUser = (userId, updateUserData) => {\r\n    console.log(userId)\r\n    return fetch(`http://77.120.241.80:8911/api/user/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Content-Type': 'application/json; charset=utf-8'\r\n        },\r\n        body: JSON.stringify(updateUserData)\r\n    }).catch(err => alert(err))\r\n}\r\n\r\nexport const deleteUser = (userId) => {\r\n    return fetch(`http://77.120.241.80:8911/api/user/${userId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'Content-Type': 'application/json; charset=utf-8'\r\n        },\r\n    }).catch(err => alert(err))\r\n}","import React, { useState } from 'react';\r\nimport './form.scss';\r\n\r\nconst Form = ({ onCreateUser, onChangeUser, headerText, cancelForm, clickedElement }) => {\r\n    const [name, onChangeName] = useState('');\r\n    const [surname, onChangeSurname] = useState('');\r\n\r\n    const handleOkButton = (e) => {\r\n        e.preventDefault()\r\n        if (headerText === 'Добавить пользователя') {\r\n            onCreateUser(name, surname)\r\n        } else {\r\n            onChangeUser(clickedElement, name, surname)\r\n        }\r\n        cancelForm(false, '')\r\n    }\r\n\r\n    return (\r\n        <form className=\"form\">\r\n            <h2>{headerText}</h2>\r\n            <input\r\n                className=\"form__input\"\r\n                type=\"text\"\r\n                placeholder=\"Введите имя пользователя\"\r\n                value={name}\r\n                onChange={(e) => onChangeName(e.target.value)}\r\n            />\r\n            <input\r\n                className=\"form__input\"\r\n                type=\"text\"\r\n                placeholder=\"Введите фамилию пользователя\"\r\n                value={surname}\r\n                onChange={(e) => onChangeSurname(e.target.value)}\r\n            />\r\n            <div className=\"form__buttons-wrapper\">\r\n                <button\r\n                    className=\"form__button\"\r\n                    onClick={handleOkButton}\r\n                >OK</button>\r\n                <button\r\n                    className=\"form__button\"\r\n                    onClick={() => cancelForm(false, '')}\r\n                >Cancel</button>\r\n            </div>\r\n        </form >\r\n    )\r\n}\r\n\r\nexport default Form;","import React, { useEffect, useState } from 'react';\r\nimport { getUsersList, onCreateUser, onDeleteUser, onChangeUser } from './actions';\r\nimport { connect } from 'react-redux';\r\nimport Form from './components/Form';\r\n\r\nconst App = ({ usersList, onCreateUser, getUsersList, onDeleteUser, onChangeUser }) => {\r\n    const [formIsOpened, onChangeFormIsOpened] = useState({ opened: false, headerText: '' })\r\n    const [clickedElement, changeClickedElement] = useState('');\r\n    const [currentPage, changeCurrentPage] = useState(0);\r\n\r\n    useEffect(() => {\r\n        getUsersList();\r\n    }, [])\r\n\r\n    const openForm = (isOpened, text, userId) => {\r\n        changeClickedElement(userId)\r\n        onChangeFormIsOpened({\r\n            opened: isOpened,\r\n            headerText: text,\r\n        })\r\n    }\r\n\r\n    const prevPage = () => {\r\n        changeCurrentPage(+currentPage - 1)\r\n    }\r\n\r\n    const nextPage = () => {\r\n        changeCurrentPage(+currentPage + 1)\r\n    }\r\n\r\n    const spliceUsersList = () => {\r\n        let x = usersList.usersList.usersList.slice(currentPage * 5, currentPage * 5 + 5);\r\n        return x\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header className=\"header\">\r\n                <button\r\n                    className=\"header__create-user-button\"\r\n                    onClick={() => openForm(true, 'Добавить пользователя')}\r\n                >Добавить нового пользователя</button>\r\n            </header>\r\n            <div className=\"users-list\">\r\n                {Object.keys(usersList.usersList).length && spliceUsersList().map(elem => {\r\n                    return (\r\n                        <div className=\"users-list__wrapper\" key={elem.id}>\r\n                            <div className=\"users-list__elem\">\r\n                                {`${elem.name} - ${elem.surname}`}\r\n                            </div>\r\n                            <div\r\n                                className=\"users-list__edit\"\r\n                                onClick={() => openForm(true, 'Редактировать пользователя', elem.id)}\r\n                            >Редактировать</div>\r\n                            <div\r\n                                className=\"users-list__delete\"\r\n                                onClick={() => onDeleteUser(elem.id)}\r\n                            >+</div>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n            <footer className=\"footer\">\r\n                <button\r\n                    className=\"footer__button\"\r\n                    onClick={prevPage}\r\n                    disabled={currentPage < 1}\r\n                >{'<'}</button>\r\n                <button\r\n                    className=\"footer__button\"\r\n                    onClick={nextPage}\r\n                    disabled={currentPage > 1}\r\n                >{'>'}</button>\r\n            </footer>\r\n            {formIsOpened.opened &&\r\n                <Form\r\n                    onCreateUser={onCreateUser}\r\n                    onChangeUser={onChangeUser}\r\n                    clickedElement={clickedElement}\r\n                    headerText={formIsOpened.headerText}\r\n                    cancelForm={openForm}\r\n                />}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapState = state => ({\r\n    usersList: state.usersList\r\n})\r\n\r\nconst mapDispatch = {\r\n    getUsersList,\r\n    onCreateUser,\r\n    onDeleteUser,\r\n    onChangeUser,\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(App);","const initialState = {\r\n    usersList: {},\r\n};\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'GET_USERS_LIST':\r\n            return {\r\n                ...state,\r\n                usersList: action.payload,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default usersReducer;","import { createStore, combineReducers, compose, applyMiddleware } from 'redux';\r\nimport usersReducer from './reducer';\r\nimport thunk from 'redux-thunk';\r\n\r\n\r\nconst reducers = combineReducers({\r\n    usersList: usersReducer,\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nexport default createStore(\r\n    reducers,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}